<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦–é¡µ - "æœªåœå…ˆæ²»"</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <!-- åŠ è½½ä¸»é¢˜å·¥å…·è„šæœ¬ -->
    <script src="/static/js/theme-utils.js"></script>
    <style>
  #batchPredictCard,
  #contactAndReply {
    display: none !important;
  }
</style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-hospital me-2"></i> "æœªåœå…ˆæ²»"
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/dashboard"><i class="bi bi-house-door" style="margin-right: 0.25rem;"></i> é¦–é¡µ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/predictor/single"><i class="bi bi-person-check" style="margin-right: 0.25rem;"></i> å•ä¾‹é¢„æµ‹</a>
                    </li>
                    <li class="nav-item" id="batchPredictLink" style="display: none;">
                        <a class="nav-link" href="/predictor/batch"><i class="bi bi-people" style="margin-right: 0.25rem;"></i> å¤šä¾‹é¢„æµ‹</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/medical-qa"><i class="bi bi-chat-dots" style="margin-right: 0.25rem;"></i> æ™ºèƒ½é—®è¯Š</a>
                    </li>
                    <li class="nav-item" id="dataDashboardLink" style="display: none;">
                        <a class="nav-link" href="/data-dashboard"><i class="bi bi-graph-up" style="margin-right: 0.25rem;"></i> æ•°æ®çœ‹æ¿</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/settings"><i class="bi bi-gear" style="margin-right: 0.25rem;"></i> è®¾ç½®</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about"><i class="bi bi-info-circle" style="margin-right: 0.25rem;"></i> å…³äºæˆ‘ä»¬</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/my-feedback"><i class="bi bi-chat-square-text" style="margin-right: 0.25rem;"></i> å’¨è¯¢ç•™è¨€</a>
                    </li>
                    <li class="nav-item" id="adminLink" style="display: none;">
                        <a class="nav-link" href="/admin"><i class="bi bi-shield-lock" style="margin-right: 0.25rem;"></i> åŒ»å¸ˆæ§åˆ¶å°</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <button class="btn btn-outline-light btn-sm" id="logoutBtn">
                        <i class="bi bi-box-arrow-right me-1"></i>é€€å‡º
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="welcome-section animate-fade-in">
        <div class="container">
            <h1 class="display-5">æ¬¢è¿è¿›å…¥"æœªåœå…ˆæ²»"ï¼Œ<span id="username">{{ username }}</span></h1>
            <p class="lead">é€‰æ‹©ä¸‹æ–¹åŠŸèƒ½å¼€å§‹ä½¿ç”¨ç³»ç»Ÿ</p>
        </div>
    </div>

    <div class="container mb-5">
        <!-- ä¸»è¦åŠŸèƒ½å¡ç‰‡ -->
        <div class="row mb-4">
            <div class="col-md-4 animate-fade-in-delay-1">
                <div class="feature-card" onclick="window.location.href='/predictor/single'">
                    <div class="card-body text-center">
                        <i class="bi bi-person-check"></i>
                        <h3 class="card-title">å•ä¾‹é£é™©é¢„æµ‹</h3>
                        <p class="card-text">è¾“å…¥å•ä¸ªæ‚£è€…æ•°æ®è¿›è¡ŒHAPIé£é™©é¢„æµ‹å¹¶ç”ŸæˆæŠ¥å‘Š</p>
                        <button class="btn btn-primary">å¼€å§‹é¢„æµ‹</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 animate-fade-in-delay-2" id="batchPredictCard">
                <div class="feature-card" onclick="window.location.href='/predictor/batch'">
                    <div class="card-body text-center">
                        <i class="bi bi-people"></i>
                        <h3 class="card-title">å¤šä¾‹é£é™©é¢„æµ‹</h3>
                        <p class="card-text">ä¸Šä¼ åŒ…å«å¤šä¸ªæ‚£è€…æ•°æ®çš„è¡¨æ ¼æ–‡ä»¶è¿›è¡Œå¤šä¾‹é¢„æµ‹</p>
                        <button class="btn btn-success">æ‰¹é‡é¢„æµ‹</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 animate-fade-in-delay-2" id="contactAndReply">
                <div class="feature-card" onclick="window.location.href='/my-feedback'">
                    <div class="card-body text-center">
                        <i class="bi bi-people"></i>
                        <h3 class="card-title">å’¨è¯¢ä¸“ä¸šåŒ»å¸ˆ</h3>
                        <p class="card-text">æŸ¥çœ‹æ‚¨æäº¤çš„å’¨è¯¢å’Œä¸“ä¸šåŒ»å¸ˆçš„å›å¤</p>
                        <button class="btn btn-success">å’¨è¯¢ç•™è¨€</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 animate-fade-in-delay-3">
                <div class="feature-card" onclick="window.location.href='/medical-qa'">
                    <div class="card-body text-center">
                        <i class="bi bi-chat-dots"></i>
                        <h3 class="card-title">æ™ºèƒ½åŒ»ç–—é—®ç­”</h3>
                        <p class="card-text">åŸºäºåŒ»å­¦çŸ¥è¯†åº“çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿ</p>
                        <button class="btn btn-info">å¼€å§‹å’¨è¯¢</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŒ»ç–—çŸ¥è¯†å¡ç‰‡ -->
        <h2 class="mb-4 animate-fade-in-delay-1">HAPIçŸ¥è¯†é€Ÿè§ˆ</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4 mb-4">
            <div class="col animate-fade-in-delay-1">
                <div class="card medical-tip-card h-100">
                    <div class="card-body">
                        <h5 class="card-title">ä»€ä¹ˆæ˜¯HAPIï¼ˆåŒ»é™¢è·å¾—æ€§å‹åŠ›æ€§æŸä¼¤ï¼‰</h5>
                        <p class="card-text">HAPIæ˜¯æŒ‡æ‚£è€…åœ¨ä½é™¢æœŸé—´å› åŒ»ç–—ç…§æŠ¤ä¸å½“ã€æŒç»­å‹è¿«ç­‰åŸå› å¼•å‘çš„å‹åŠ›æ€§æŸä¼¤ï¼Œå¸¸è§äºé•¿æœŸå§åºŠæˆ–è¡ŒåŠ¨å—é™çš„è€å¹´äººã€‚</p>
                    </div>
                </div>
            </div>
            <div class="col animate-fade-in-delay-2">
                <div class="card medical-tip-card h-100">
                    <div class="card-body">
                        <h5 class="card-title">HAPIå¸¸è§å‘ç”Ÿéƒ¨ä½</h5>
                        <p class="card-text">åŒ»é™¢è·å¾—æ€§å‹ä¼¤å¸¸å‘ç”Ÿäºéª¶å°¾éƒ¨ã€è¶³è·Ÿã€è‚©èƒ›éƒ¨å’Œé«‹éƒ¨ç­‰éª¨çªå‡ºåŒºåŸŸï¼Œè¿™äº›åŒºåŸŸåœ¨å—å‹æ—¶è¡€æ¶²å¾ªç¯æ˜“å—é˜»ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="col animate-fade-in-delay-3">
                <div class="card medical-tip-card h-100">
                    <div class="card-body">
                        <h5 class="card-title">HAPIçš„åˆ†æœŸä¸è¡¨ç°</h5>
                        <p class="card-text">HAPIåˆ†ä¸ºå››æœŸï¼Œä»çš®è‚¤å®Œæ•´ä½†å‘çº¢å¼€å§‹ï¼Œé€æ¸å‘å±•ä¸ºçš®è‚¤ç ´æŸã€æ·±å±‚ç»„ç»‡åæ­»ç”šè‡³éª¨éª¼æš´éœ²ï¼Œè¶Šæ—©è¯†åˆ«å¹²é¢„æ•ˆæœè¶Šå¥½ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ›´å¤šåŒ»ç–—çŸ¥è¯†å¡ç‰‡ -->
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col animate-fade-in-delay-1">
                <div class="card medical-tip-card h-100">
                    <div class="card-body">
                        <h5 class="card-title">HAPIçš„é¢„é˜²æªæ–½</h5>
                        <p class="card-text">å®šæœŸå˜æ¢ä½“ä½ã€ä½¿ç”¨å‡å‹è£…ç½®ã€ä¿æŒçš®è‚¤å¹²ç‡¥æ¸…æ´ã€åŠ å¼ºè¥å…»æ”¯æŒç­‰ï¼Œæ˜¯é¢„é˜²HAPIçš„é‡è¦æªæ–½ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="col animate-fade-in-delay-2">
                <div class="card medical-tip-card h-100">
                    <div class="card-body">
                        <h5 class="card-title">HAPIçš„æŠ¤ç†ä¸æ²»ç–—</h5>
                        <p class="card-text">è½»åº¦å‹ä¼¤å¯é€šè¿‡ä¿æŒä¼¤å£æ¸…æ´ã€é€‚å½“æ•·æ–™è¿›è¡Œå¤„ç†ï¼›é‡åº¦åˆ™å¯èƒ½éœ€è¦æ¸…åˆ›æˆ–å¤–ç§‘æ‰‹æœ¯ï¼Œæ²»ç–—æœŸé—´åº”æŒç»­å‡å‹ä¸åŠ å¼ºè¥å…»ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="col animate-fade-in-delay-3">
                <div class="card medical-tip-card h-100">
                    <div class="card-body">
                        <h5 class="card-title">äººå·¥æ™ºèƒ½åŒ»ç–—åŠ©æ‰‹</h5>
                        <p class="card-text">AIåŒ»ç–—åŠ©æ‰‹èƒ½å¤Ÿæä¾›24hçš„åŒ»ç–—å’¨è¯¢æœåŠ¡ï¼Œä½†ä»…ä¾›å‚è€ƒï¼Œé‡è¦åŒ»ç–—å†³ç­–ä»éœ€å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿã€‚</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">Â© 2025 "æœªåœå…ˆæ²»". ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- å¼•å…¥JavaScriptæ–‡ä»¶ -->
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/dashboard.js"></script>
    
    <!-- æƒé™æ£€æŸ¥è„šæœ¬ -->
    <script>
  // ğŸ’¡ å°è£…ä¸ºå‡½æ•°ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²æ˜¾ç¤ºæ­£ç¡®å†…å®¹
  function showCardByUserRole(role) {
    const contactCard = document.getElementById('contactAndReply');
    const batchCard = document.getElementById('batchPredictCard');
    const dashboardLink = document.getElementById('dataDashboardLink');
    const batchLink = document.getElementById('batchPredictLink');

    // è‹¥æœ‰å…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™è·³è¿‡å¤„ç†
    if (!contactCard || !batchCard || !dashboardLink || !batchLink) return;

    if (role === 'admin') {
      // æ˜¾ç¤ºç®¡ç†å‘˜ç›¸å…³å†…å®¹
      contactCard.style.setProperty('display', 'none', 'important');
      batchCard.style.setProperty('display', 'block', 'important');
      dashboardLink.style.setProperty('display', 'inline-block', 'important');
      batchLink.style.setProperty('display', 'inline-block', 'important');
    } else {
      // æ˜¾ç¤ºæ™®é€šç”¨æˆ·å†…å®¹
      batchCard.style.setProperty('display', 'none', 'important');
      contactCard.style.setProperty('display', 'block', 'important');
      dashboardLink.style.setProperty('display', 'none', 'important');
      batchLink.style.setProperty('display', 'none', 'important');
    }
  }

  document.addEventListener('DOMContentLoaded', async function () {
    console.log('DOM åŠ è½½å®Œæˆï¼Œå‡†å¤‡æ‰§è¡Œèº«ä»½è¯†åˆ«');

    // ğŸ’¡ ç­‰å¾… authManager åˆå§‹åŒ–ï¼ˆè‹¥æ˜¯å¼‚æ­¥èº«ä»½ç³»ç»Ÿï¼‰
    if (window.authManager && typeof authManager.init === 'function') {
      await authManager.init();
    }

    // ğŸ’¡ ä» localStorage è·å–èº«ä»½ï¼ˆå»ºè®®ç”±åç«¯è®¾ç½®ï¼‰
    const userRole = localStorage.getItem('user_role') || 'user';
    console.log('å½“å‰ç”¨æˆ·è§’è‰²æ˜¯ï¼š', userRole);

    // ğŸ’¡ æ§åˆ¶æ˜¾ç¤ºå…ƒç´ 
    showCardByUserRole(userRole);
  });
</script>
</body>
</html> 
